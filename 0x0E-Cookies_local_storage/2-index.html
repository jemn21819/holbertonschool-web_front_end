<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>2. Read cookie</title>
	</head>
	<body>
		<h1>Login to the website</h1>
		<form action="">
			<input id="firstname" type="text" placeholder="Firstname" />
			<input id="email" type="text" placeholder="Email" />
			<button onclick="setCookies()">Log me in</button>
		</form>

		<h1>Cookies</h1>

		<button onclick="showCookies()">Show the cookies</button>

		<script type="application/javascript">
			const setCookies = () => {
				var d = new Date();
				d.setTime(d.getTime() + (10*24*60*60*1000));
				const firstname = document.getElementById("firstname").value;
				const email = document.getElementById("email").value;
				document.cookie = `firstname=${firstname};`;
				document.cookie = `email=${email};`;
				document.cookie = `expires=${d.toGMTString()};`;
			};

const showCookies = () => {
	const element = document.createElement("p");
	console.log(getCookie(email))
	element.innerHTML = `Email: ${getCookie('email')} - Firstname: ${getCookie('firstname')}`;
	document.querySelector("body").appendChild(element);

};
const getCookie = (name) => {
	let c = `${name}=`;
	let splittedCookie = document.cookie.split(';');
	for(let i=0; i < splittedCookie.length; i++){

		let cookie = splittedCookie[i];
		while (cookie.charAt(0) == ' ')
			cookie = cookie.substring(1);
		if(cookie.indexOf(c) == 0){
			return cookie.substring(c.length, cookie.length)
		}
	}
	return "";
}
		</script>
	</body>
</html>
